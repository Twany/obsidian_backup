### 后端如何避免订单重复提交
有三道门槛
#### 1. 前端防抖
如果没有做可能会产生点返回会有两个相同界面
做防抖：控制用户100ms内只能做一次提交订单提交
#### 2. 后端频控
使用Redis+Lua实现分布式锁，每个请求生成一个token，请求来了查缓存，有就说明最近刚提交，拒绝掉
#### 3. 数据库幂等
out_trade_id是唯一的，保证唯一性
生成out_trade_id一定唯一，因为会重试最多5次，直到生成一个唯一的id

同时使用订单和流水的状态机来保证唯一：初始，支付中，失败，成功；每次进行新的操作都会去查当前订单和流水的状态（有的方法内部还会重新查交易单，而不是传过来的）

### 用户支付前订单状态发送改变吗？
即prePay 在具体之前前

### 说一下一个完整的支付流程：从用户下单开始到最终支付回调结束

### callback谁调用


### 加密算法有哪些？对称还是非对称

### 那用到了MQ

### 服务峰值多少？平均值多少？几个机器 几个Redis


### 数据库主从架构是怎么做的


